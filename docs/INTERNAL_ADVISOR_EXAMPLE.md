# 对内顾问模式示例

## 📋 场景说明

**对内解惑顾问**：企业内部知识库助手，帮助员工查找：
- 公司政策
- 操作流程
- 常见问题
- 文档资料

**不需要：**
- ❌ 服务列表（没有对外服务）
- ❌ 客户画像（面向内部员工）
- ❌ 回复模板（使用知识库动态生成）

---

## 📁 文件结构示例

```
companies/internal-company/knowledge/
├── 0-config.json                # 配置：mode = "internal_advisor"
├── 2-company_info.json         # 组织信息（改为内部组织信息）
├── 3-ai_config.json            # AI 配置（意图、实体）
├── 5-faq_detailed.json         # 常见问题（可选）
└── 6-knowledge_base.json       # 知识库内容（主要知识源）
```

---

## 📄 配置文件示例

### `0-config.json`

```json
{
  "mode": "internal_advisor",
  "enabled_modules": {
    "services": false,
    "personas": false,
    "response_templates": false,
    "faq": true,
    "knowledge_base": true
  }
}
```

---

## 📄 知识库内容示例

### `6-knowledge_base.json`

```json
{
  "_file_description": "企业内部知识库：包含文档、文章、流程、政策等",
  "version": "1.0.0",
  "articles": [
    {
      "id": "article_001",
      "title": "如何申请年假",
      "category": "hr",
      "content": "申请年假的流程如下：\n\n1. **登录 HR 系统**\n   - 访问 https://hr.company.com\n   - 使用员工账号登录\n\n2. **选择「请假申请」**\n   - 在左侧菜单找到「请假管理」\n   - 点击「新建请假申请」\n\n3. **填写请假信息**\n   - 请假类型：选择「年假」\n   - 请假日期：选择开始和结束日期\n   - 请假原因：简要说明请假原因\n\n4. **提交审批**\n   - 系统会自动提交给直属主管\n   - 主管审批通过后，系统会自动记录\n\n**注意事项：**\n- 年假需要提前 3 天申请\n- 年假余额可在「我的假期」中查看\n- 如有紧急情况，可联系 HR 部门",
      "tags": ["年假", "请假", "HR", "流程"],
      "related_articles": ["article_002", "article_003"],
      "last_updated": "2025-01-15"
    },
    {
      "id": "article_002",
      "title": "年假余额查询",
      "category": "hr",
      "content": "查询年假余额的方法：\n\n1. 登录 HR 系统\n2. 点击「我的假期」\n3. 查看「年假余额」\n\n年假计算规则：\n- 入职满一年后，每年享有 10 天年假\n- 年假可以累积，最多累积 20 天\n- 年假在每年 12 月 31 日清零",
      "tags": ["年假", "余额", "查询"],
      "related_articles": ["article_001"],
      "last_updated": "2025-01-10"
    }
  ],
  "procedures": [
    {
      "id": "proc_001",
      "title": "新员工入职流程",
      "category": "onboarding",
      "steps": [
        {
          "step": 1,
          "title": "准备入职材料",
          "description": "准备以下材料：\n- 身份证正反面复印件\n- 学历证明\n- 体检报告\n- 银行卡复印件（用于发薪）",
          "responsible": "新员工",
          "duration": "入职前 3 天",
          "notes": "材料需在入职前准备好"
        },
        {
          "step": 2,
          "title": "填写入职表格",
          "description": "在线填写个人信息：\n- 基本信息\n- 紧急联系人\n- 银行账户信息\n- 健康声明",
          "responsible": "新员工",
          "duration": "30 分钟",
          "link": "https://hr.company.com/onboarding"
        },
        {
          "step": 3,
          "title": "HR 审核",
          "description": "HR 部门审核入职材料",
          "responsible": "HR",
          "duration": "1 个工作日"
        },
        {
          "step": 4,
          "title": "领取办公用品",
          "description": "到 IT 部门领取：\n- 笔记本电脑\n- 工卡\n- 门禁卡",
          "responsible": "新员工",
          "duration": "30 分钟",
          "location": "IT 部门（3 楼）"
        }
      ],
      "tags": ["入职", "流程", "新员工"],
      "last_updated": "2025-01-10"
    }
  ],
  "policies": [
    {
      "id": "policy_001",
      "title": "远程办公政策",
      "category": "workplace",
      "content": "## 远程办公政策\n\n### 适用范围\n所有正式员工，经主管批准后可申请远程办公。\n\n### 申请流程\n1. 提前 1 周向直属主管申请\n2. 说明远程办公的原因和计划\n3. 主管审批通过后生效\n\n### 要求\n- **工作时间**：必须保证正常工作时间在线\n- **会议参与**：必须参加所有必要的团队会议\n- **工作产出**：必须保证工作质量和效率\n- **沟通**：保持与团队的及时沟通\n\n### 频率限制\n- 每周至少到办公室 2 天\n- 重要会议必须到办公室参加\n\n### 设备要求\n- 稳定的网络连接\n- 公司配发的笔记本电脑\n- 必要的办公软件\n\n**生效日期**：2025-01-01\n**最后更新**：2025-01-01",
      "tags": ["远程办公", "政策", "工作方式"],
      "effective_date": "2025-01-01",
      "last_updated": "2025-01-01"
    }
  ]
}
```

---

## 🔄 AI 如何使用知识库

### 当前方式（FAQ 匹配）

```typescript
// 1. 用户问："如何申请年假？"
// 2. 系统在 FAQ 中查找匹配的问题
// 3. 返回预定义的答案
```

### 知识库方式（RAG 检索）

```typescript
// 1. 用户问："年假可以累积吗？"
// 2. 系统在 knowledge_base.json 中检索相关内容
// 3. 找到 article_002（年假余额查询）中包含相关信息
// 4. AI 基于检索到的内容生成回答：
//    "根据公司政策，年假可以累积，最多累积 20 天。
//     年假在每年 12 月 31 日清零。"
```

---

## 💡 实施建议

### 方案 1：简单检索（当前可实现）

**实现方式：**
- 在 `knowledge_base.json` 中存储结构化内容
- 使用关键词匹配或简单搜索
- AI 基于检索到的内容生成回答

**优点：**
- ✅ 实现简单
- ✅ 不需要向量化
- ✅ 适合中小型知识库

**缺点：**
- ⚠️ 检索精度有限
- ⚠️ 不适合大文档

---

### 方案 2：RAG 检索（未来扩展）

**实现方式：**
- 文档向量化
- 语义搜索
- 检索相关片段
- AI 基于片段生成回答

**优点：**
- ✅ 检索精度高
- ✅ 支持大文档
- ✅ 语义理解

**缺点：**
- ⚠️ 实现复杂
- ⚠️ 需要向量数据库

---

## 🎯 推荐实施步骤

### 阶段 1：基础支持（当前）

1. ✅ 创建 `0-config.json` 配置文件
2. ✅ 创建 `6-knowledge_base.json` 模板
3. ✅ 代码支持配置驱动加载
4. ✅ 实现简单的关键词检索

### 阶段 2：完善检索（未来）

1. 实现更智能的检索算法
2. 支持文档向量化
3. 实现 RAG 功能

---

## 📊 对比：FAQ vs 知识库

| 特性 | FAQ（预定义QA） | 知识库（动态检索） |
|------|----------------|------------------|
| **维护方式** | 需要预定义问题和答案 | 只需添加知识内容 |
| **灵活性** | ⭐⭐ 低（固定答案） | ⭐⭐⭐⭐⭐ 高（动态生成） |
| **适用场景** | 常见问题 | 各种问题 |
| **实施难度** | ⭐ 简单 | ⭐⭐⭐ 中等 |
| **回答质量** | ⭐⭐⭐⭐ 高（人工编写） | ⭐⭐⭐ 中（AI 生成） |

**建议：**
- **FAQ**：用于常见、标准的问题
- **知识库**：用于复杂、多变的问题

**最佳实践：**
- 两者结合使用
- FAQ 优先（如果匹配到）
- 知识库作为补充（如果 FAQ 没有匹配）
