# 文件夹命名指南

## 📋 当前命名规则

### companyId（公司ID）

**验证规则：** `/^[a-z0-9-]{2,50}$/`
- ✅ 只允许：**小写字母**、**数字**、**连字符（-）**
- ❌ 不允许：大写字母、中文、特殊字符、空格

**用途：**
- URL 路径：`/api/{company}/chat`
- 数据库标识
- 日志标识

**示例：**
- ✅ `goldenyears`
- ✅ `company-b`
- ✅ `abc123`
- ❌ `好時有影`（中文）
- ❌ `Company-B`（大写）
- ❌ `company b`（空格）

---

### path（文件夹路径）

**规则：** 在 `registry.json` 中定义，用于构建文件系统路径

**文件路径构建：**
```
/companies/{path}/knowledge/
```

**注意事项：**
- `path` 会直接用于文件系统路径
- 虽然技术上可以使用中文，但**强烈建议使用英文**

---

## ⚠️ 为什么建议使用英文命名？

### 1. URL 兼容性

**companyId 必须英文：**
- 代码验证规则只允许 `[a-z0-9-]`
- 用于 API URL：`/api/goldenyears/chat`
- 中文会导致验证失败

### 2. 文件系统兼容性

**path 虽然可以使用中文，但问题：**
- ❌ **跨系统问题**：不同操作系统的文件系统编码不同
- ❌ **Git 问题**：可能导致合并冲突或显示问题
- ❌ **URL 编码**：如果 path 出现在 URL 中，需要编码（%E5%A5%BD...）
- ❌ **命令行工具**：在终端中输入中文路径不便
- ❌ **部署问题**：某些部署环境可能不支持中文路径

### 3. 代码和工具兼容性

- ✅ **日志可读性**：英文日志更容易搜索和调试
- ✅ **IDE 支持**：大多数 IDE 对英文路径支持更好
- ✅ **团队协作**：国际化团队更容易协作

---

## ✅ 最佳实践

### 推荐命名方式

**使用英文 ID + 中文显示名称：**

```json
{
  "companies": {
    "goldenyears": {              // ✅ 英文 ID（用于路径和URL）
      "id": "goldenyears",        // ✅ 英文
      "name": "好時有影",          // ✅ 中文（用于显示）
      "name_en": "Golden Years",  // ✅ 英文名（备用）
      "path": "goldenyears"       // ✅ 英文（用于文件路径）
    },
    "company-b": {                // ✅ 英文 ID
      "id": "company-b",
      "name": "B公司",            // ✅ 中文（用于显示）
      "name_en": "Company B",
      "path": "company-b"         // ✅ 英文
    }
  }
}
```

### 命名建议

| 用途 | 格式 | 示例 | 说明 |
|------|------|------|------|
| **companyId** | `[a-z0-9-]` | `goldenyears`, `company-b` | 必须英文，用于URL |
| **path** | `[a-z0-9-]` | `goldenyears`, `company-b` | 建议英文，用于文件路径 |
| **name** | 任何字符 | `好時有影`, `B公司` | 可以中文，用于显示 |
| **name_en** | 英文 | `Golden Years`, `Company B` | 英文名，用于国际化 |

---

## 📊 当前状态

### ✅ 当前文件夹都是英文命名

```
companies/
├── goldenyears/     ✅ 英文
├── company-b/       ✅ 英文
├── company-c/       ✅ 英文
└── company-d/       ✅ 英文
```

### ✅ registry.json 配置正确

```json
{
  "goldenyears": {
    "id": "goldenyears",      // ✅ 英文 ID
    "name": "好時有影",        // ✅ 中文显示名
    "path": "goldenyears"     // ✅ 英文路径
  }
}
```

---

## 🎯 结论

### ✅ **建议：保持英文命名**

**理由：**
1. ✅ **代码要求**：`companyId` 必须符合 `/^[a-z0-9-]{2,50}$/` 规则
2. ✅ **兼容性**：跨系统、跨平台兼容性更好
3. ✅ **工具支持**：更好的 IDE、Git、命令行支持
4. ✅ **URL 友好**：不需要 URL 编码
5. ✅ **维护性**：更容易维护和调试

### 💡 **折衷方案**

如果一定要体现中文名称：
- ✅ **文件夹名用英文**：`goldenyears/`
- ✅ **显示名用中文**：`registry.json` 中的 `name` 字段
- ✅ **文档用中文**：README、注释等可以中文

这样既保证了技术兼容性，又能满足显示需求。

---

## 📝 总结

**当前架构已经是最佳实践：**
- ✅ 文件夹名：英文（`goldenyears`, `company-b`）
- ✅ 显示名：中文（`registry.json` 中的 `name`）
- ✅ 代码验证：只允许英文 ID
- ✅ 功能完整：不影响任何功能

**建议：继续使用英文命名文件夹，中文仅用于显示。**
