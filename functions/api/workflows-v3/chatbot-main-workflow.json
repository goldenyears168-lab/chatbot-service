{
  "id": "chatbot-main-workflow",
  "name": "Chatbot Main Workflow",
  "version": "1.0.0",
  "description": "完整的聊天机器人工作流，包含所有核心节点",
  
  "nodes": [
    {
      "id": "validate",
      "type": "validate-request",
      "name": "验证请求",
      "position": { "x": 100, "y": 200 },
      "config": {
        "maxMessageLength": 1000
      }
    },
    {
      "id": "initialize",
      "type": "initialize-services",
      "name": "初始化服务",
      "position": { "x": 300, "y": 200 }
    },
    {
      "id": "context",
      "type": "context-management",
      "name": "上下文管理",
      "position": { "x": 500, "y": 200 }
    },
    {
      "id": "intent",
      "type": "intent-extraction",
      "name": "意图提取",
      "position": { "x": 700, "y": 200 }
    },
    {
      "id": "state",
      "type": "state-transition",
      "name": "状态转换",
      "position": { "x": 900, "y": 200 }
    },
    {
      "id": "special",
      "type": "special-intents",
      "name": "特殊意图处理",
      "position": { "x": 1100, "y": 200 }
    },
    {
      "id": "faq",
      "type": "faq-check",
      "name": "FAQ 检查",
      "position": { "x": 1100, "y": 350 }
    },
    {
      "id": "llm",
      "type": "llm-generation",
      "name": "LLM 生成",
      "position": { "x": 1300, "y": 350 }
    },
    {
      "id": "response",
      "type": "build-response",
      "name": "构建响应",
      "position": { "x": 1500, "y": 275 }
    }
  ],
  
  "connections": [
    {
      "from": "validate",
      "fromOutput": "success",
      "to": "initialize"
    },
    {
      "from": "validate",
      "fromOutput": "error",
      "to": "response",
      "comment": "验证失败直接返回错误响应"
    },
    {
      "from": "initialize",
      "fromOutput": "success",
      "to": "context"
    },
    {
      "from": "context",
      "fromOutput": "success",
      "to": "intent"
    },
    {
      "from": "intent",
      "fromOutput": "success",
      "to": "state"
    },
    {
      "from": "state",
      "fromOutput": "success",
      "to": "special"
    },
    {
      "from": "special",
      "fromOutput": "response",
      "to": "response",
      "comment": "特殊意图直接返回响应"
    },
    {
      "from": "special",
      "fromOutput": "continue",
      "to": "faq"
    },
    {
      "from": "faq",
      "fromOutput": "response",
      "to": "response",
      "comment": "FAQ 匹配直接返回"
    },
    {
      "from": "faq",
      "fromOutput": "continue",
      "to": "llm"
    },
    {
      "from": "llm",
      "fromOutput": "response",
      "to": "response",
      "comment": "LLM 不可用返回错误响应"
    },
    {
      "from": "llm",
      "fromOutput": "success",
      "to": "response"
    }
  ],
  
  "settings": {
    "timeout": 30000,
    "retryPolicy": {
      "maxRetries": 0,
      "backoff": "exponential"
    },
    "logging": {
      "level": "info",
      "traceExecution": true
    },
    "concurrency": {
      "maxParallel": 1
    }
  },
  
  "metadata": {
    "author": "Pipeline Team",
    "created": "2025-12-10T00:00:00Z",
    "updated": "2025-12-10T00:00:00Z",
    "tags": ["chatbot", "production", "main-flow"],
    "version_history": [
      {
        "version": "1.0.0",
        "date": "2025-12-10",
        "changes": "Initial migration from Pipeline v2 to v3"
      }
    ]
  }
}
